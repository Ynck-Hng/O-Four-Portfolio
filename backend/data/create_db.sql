BEGIN;

DROP TABLE IF EXISTS recipe_ingredient, ingredient, recipe, step;

CREATE TABLE IF NOT EXISTS ingredient(
    id INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    name TEXT
);

CREATE TABLE IF NOT EXISTS recipe(
    id INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    name TEXT,
    description TEXT,
    grade INT
);

CREATE TABLE IF NOT EXISTS recipe_ingredient(
    recipe_id INT REFERENCES recipe(id),
    ingredient_id INT REFERENCES ingredient(id)
);

CREATE TABLE IF NOT EXISTS step(
    id INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    content TEXT,
    recipe_id INT REFERENCES recipe(id)
);


INSERT INTO ingredient (name) VALUES
('tomates'), 
('poivron rouge'),
('courgettes'),
('aubergines'),
('huile d''olive'), 
('soupe d''herbes de Provence'),
('sel'),
('poivre'),
('quinoa'),
('eau'), 
('salade'),
('tomate cerise'),
('concombre'),
('oignon rouge'),
('vinaigrette'), 
('avocat'),
('viande hachée'),
('oignon'),
('ail'),
('purée de tomates'), 
('origan'), 
('thym'),
('feuille de laurier'),
('feuilles de lasagnes'),
('beurre'), 
('farine'), 
('lait'),
('noix de muscade'),
('fromage'),
('sauce béchamel'), 
('pâtes'),
('lardon'),
('oeuf'),
('crème fraîche'),
('poulet'), 
('yaourt nature'),
('jus de citron'),
('gigembre'),
('ail'),
('curcuma'), 
('cumin'),
('garam masala'),
('paprika'),
('huile végétale'),
('huile'), 
('coriandre'),
('piment'),
('lentilles'),
('carotte'),
('pomme de terre'), 
('lait de coco'),
('riz basmati'),
('pâte feuilletée'),
('poudre d''amande'),
('sucre'), 
('fécule de maïs'),
('persil'),
('sauce tomate'),
('pâte de tomate'),
('chapelure'), 
('pain'),
('vinaigre de vin blanc'),
('moutarde de dijon'),
('gousse de vanille'),
('sucre cristalisé'),
('crème liquide');

INSERT INTO recipe (name, description, grade) VALUES 
('Ratatouille', 'Un plat végétarien traditionnel du sud de la France à base de légumes d''été mijotés.', 3),
('Salade de quinoa', 'Une salade saine et savoureuse à base de quinoa, de légumes frais et d''une vinaigrette légère.', 2),
('Lasagnes bolognaise', 'Plat traditionnel italien de pâtes en couches alternées avec une sauce à la viande et de la béchamel.', 5),
('Quiche Lorraine', 'Une tarte salée garnie de lardons et de fromage, typique de la région Lorraine en France.', 4),
('Poulet Tikka Masala', 'Un plat indien populaire composé de morceaux de poulet marinés dans des épices et grillés, puis cuits dans une sauce épicée et crémeuse.', 4),
('Curry de lentilles', 'Un plat végétarien indien épicé et savoureux à base de lentilles et de légumes', 3),
('Galette des rois', 'Une délicieuse galette des rois à la frangipane', 4),
('Boulette de viande en sauce', 'Un plat réconfortant de boulettes de viande mijotées dans une sauce tomate savoureuse.', 4),
('Salade Caesar en sauce', 'Une salade savoureuse simple à préparer avec des croûtons croustillants, du parmesan râpé et une délicieuse sauce Caesar', 4),
('Crème brulée', 'Un dessert classique français à base de crème et de sucre, avec une croûte caramélisée sur le dessus.', 5);

INSERT INTO recipe_ingredient (recipe_id, ingredient_id) VALUES
(1,1),
(1,2),
(1,3),
(1,4),
(1,5),
(1,6),
(1,7),
(2,9),
(2,10),
(2,11),
(2,12),
(2,13),
(2,14),
(2,15),
(2,16),
(3, 17),
(3, 18),
(3, 19),
(3, 20),
(3, 21),
(3, 22),
(3, 23),
(3, 24),
(3, 25),
(3, 26),
(3, 27),
(3, 28),
(3, 29),
(3, 30),
(3, 7),
(3, 8),
(3, 1),
(3, 5),
(4, 31),
(4, 32),
(4, 33),
(4, 34),
(4, 7),
(4, 8),
(4, 28),
(4, 29),
(5, 35),
(5, 36),
(5, 37),
(5, 38),
(5, 39),
(5, 40),
(5, 41),
(5, 42),
(5, 43),
(5, 44),
(5, 7),
(5, 18),
(5, 1),
(5, 34),
(6, 45),
(6, 46),
(6, 47),
(6, 48),
(6, 49),
(6, 50),
(6, 51),
(6, 52),
(6, 40),
(6, 1),
(6, 7),
(6, 8),
(6, 18),
(6, 39),
(6, 41),
(7, 53),
(7, 54),
(7, 55),
(7, 56),
(7, 33),
(7, 25),
(7, 7),
(8, 57),
(8, 58),
(8, 59),
(8, 60),
(8, 10),
(8, 5),
(8, 7),
(8, 8),
(8, 17),
(8, 18),
(8, 33),
(8, 39),
(9, 61),
(9, 62),
(9, 63),
(9, 29),
(9, 35),
(9, 11),
(9, 7),
(9, 8),
(9, 37),
(9, 33),
(9, 5),
(9, 39),
(9, 12),
(10, 64),
(10, 65),
(10, 66),
(10, 34),
(10, 55);

INSERT INTO step (content, recipe_id) VALUES

('Préchauffer le four à 200°C.',1),
('Couper les légumes en morceaux de taille similaire.',1),
('Étaler les tomates en dés sur le fond d''un plat allant au four.',1),
('Ajouter les poivrons, les courgettes et les aubergines sur les tomates.',1),
('Verser l''huile d''olive sur les légumes et saupoudrer d''herbes de Provence.',1),
('Saler et poivrer selon votre goût.',1),
('Mettre le plat au four et cuire pendant environ 45 minutes ou jusqu''à ce que les légumes soient tendres.',1),
('Sortir le plat du four et servir chaud, tiède ou froid.', 1),
('Faire cuire le quinoa selon les instructions du paquet.', 2),
('Couper les tomates cerises en deux.', 2),
('Couper l''avocat en cubes.', 2),
('Couper le concombre en rondelles.', 2),
('Hacher finement l''oignon rouge.', 2),
('Mélanger tous les ingrédients de la vinaigrette dans un petit bol.', 2),
('Mélanger le quinoa cuit, les légumes et la vinaigrette dans un grand bol.', 2),
('Servir frais.', 2),
('Préchauffer le four à 180°C.', 3),
('Dans une grande poêle, faire chauffer l''huile d''olive à feu moyen.', 3),
('Ajouter l''oignon et l''ail et faire revenir jusqu''à ce qu''ils soient tendres.', 3),
('Ajouter la viande hachée et faire revenir jusqu''à ce qu''elle soit bien dorée.', 3),
('Ajouter les tomates en dés, la purée de tomates, l''origan, le thym et le laurier.', 3),
('Saler et poivrer selon le goût.', 3),
('Laisser mijoter à feu doux pendant environ 20 minutes.', 3),
('Dans une casserole, faire fondre le beurre à feu moyen.', 3),
('Ajouter la farine et mélanger jusqu''à ce que le mélange soit homogène.', 3),
('Incorporer graduellement le lait en fouettant constamment jusqu''à ce que la sauce soit lisse et épaisse.', 3),
('Saler, poivrer et ajouter la noix de muscade selon le goût.', 3),
('Dans un plat allant au four, étaler une fine couche de sauce à la viande.', 3),
('Recouvrir avec une couche de lasagnes sèches, puis une couche de sauce béchamel.', 3),
('Répéter les couches de lasagnes et de sauce en alternant jusqu''à ce que tous les ingrédients soient utilisés.', 3),
('Terminer avec une couche de sauce à la viande et parsemer de fromage râpé.', 3),
('Cuire les lasagnes au four pendant environ 30 à 40 minutes, ou jusqu''à ce que le fromage soit fondu et doré.', 3),
('Laisser reposer pendant quelques minutes avant de servir.', 3),
('Préchauffer le four à 200°C.', 4),
('Faire cuire les lardons dans une poêle jusqu''à ce qu''ils soient dorés. Les égoutter et réserver.', 4),
('Dans un saladier, battre les oeufs et la crème fraîche.', 4),
('Ajouter le fromage râpé et les lardons à la préparation.', 4),
('Assaisonner avec du sel, du poivre et de la noix de muscade râpée.', 4),
('Étaler la pâte dans un moule à tarte beurré et fariné.', 4),
('Piquer le fond de la pâte avec une fourchette.', 4),
('Verser la préparation sur la pâte.', 4),
('Enfourner la quiche et la faire cuire pendant environ 30 minutes ou jusqu''à ce qu''elle soit dorée.', 4),
('Sortir la quiche du four et laisser reposer pendant quelques minutes avant de la servir.', 4),
('Dans un grand bol, mélanger le yaourt, le jus de citron, le gingembre, l''ail, le curcuma, le cumin, le garam masala, le paprika et le sel.', 5),
('Ajouter les morceaux de poulet et bien les enrober de marinade.', 5),
('Couvrir le bol et réfrigérer pendant au moins 1 heure (ou toute la nuit pour une meilleure saveur).', 5),
('Préchauffer le four à 220°C.', 5),
('Disposer les morceaux de poulet marinés sur une plaque à pâtisserie et les faire griller au four pendant environ 10 minutes ou jusqu''à ce qu''ils soient légèrement dorés.', 5),
('Pendant ce temps, dans une grande casserole, faire chauffer l''huile à feu moyen.', 5),
('Ajouter l''oignon et faire sauter jusqu''à ce qu''il soit translucide.', 5),
('Ajouter l''ail et le gingembre et faire sauter pendant 1 minute.', 5),
('Ajouter les tomates, la crème fraîche, le curcuma, le cumin, le garam masala, le paprika et le sel.', 5),
('Réduire le feu et laisser mijoter pendant environ 15 minutes, en remuant de temps en temps.', 5),
('Ajouter les morceaux de poulet grillés à la sauce et laisser mijoter encore 5 minutes.', 5),
('Servir chaud avec du riz basmati ou du pain naan.', 5),
('Faire chauffer de l''huile dans une casserole et y faire revenir l''oignon et l''ail hachés jusqu''à ce qu''ils soient dorés.', 6),
('Ajouter les épices (cumin, coriandre, curcuma, piment) et faire cuire pendant 1 minute en remuant.', 6),
('Ajouter les lentilles, les carottes et les pommes de terre coupées en dés, puis verser suffisamment d''eau pour couvrir les ingrédients.', 6),
('Porter à ébullition, puis réduire le feu et laisser mijoter pendant environ 25 minutes jusqu''à ce que les lentilles et les légumes soient tendres.', 6),
('Ajouter les tomates concassées et le lait de coco et laisser mijoter encore 5 minutes.', 6),
('Assaisonner avec du sel et du poivre selon votre goût.', 6),
('Servir avec du riz basmati chaud.', 6),
('Préchauffer le four à 210°C.', 7),
('Dans un saladier, mélanger la poudre d''amande, le sucre, la fécule de maïs, le sel et le beurre ramolli jusqu''à obtenir une préparation homogène.', 7),
('Ajouter les oeufs un à un en mélangeant bien entre chaque ajout.', 7),
('Étaler une première pâte feuilletée sur une plaque de cuisson.', 7),
('Répartir la préparation à la frangipane sur la pâte en laissant une bordure d''environ 2 cm.', 7),
('Placer la fève sur la frangipane.', 7),
('Humidifier les bords de la pâte avec un peu d''eau à l''aide d''un pinceau.', 7),
('Recouvrir la galette avec la seconde pâte feuilletée.', 7),
('Souder les bords en appuyant légèrement avec les doigts.', 7),
('Dessiner des motifs sur le dessus de la galette à l''aide d''un couteau.', 7),
('Enfourner la galette pendant environ 30 minutes ou jusqu''à ce qu''elle soit dorée et croustillante.', 7),
('Laisser refroidir la galette avant de la servir.', 7),
('Dans un grand bol, mélanger la viande hachée, la chapelure, l''œuf, l''ail haché, le persil frais, le sel et le poivre.', 8),
('Façonner la viande en boulettes de la taille d''une balle de golf.', 8),
('Dans une grande poêle, chauffer l''huile d''olive à feu moyen-vif.', 8),
('Ajouter les boulettes de viande et faire revenir jusqu''à ce qu''elles soient dorées sur tous les côtés.', 8),
('Retirer les boulettes de viande de la poêle et réserver.', 8),
('Dans la même poêle, ajouter l''oignon haché et faire revenir jusqu''à ce qu''il soit translucide.', 8),
('Ajouter l''ail haché et faire revenir pendant 1 minute.', 8),
('Ajouter la pâte de tomate et faire revenir pendant 1 minute supplémentaire.', 8),
('Ajouter la sauce tomate, l''eau, le sel et le poivre, et bien mélanger.', 8),
('Ajouter les boulettes de viande réservées dans la poêle avec la sauce tomate.', 8),
('Réduire le feu et laisser mijoter pendant 30 minutes, en remuant de temps en temps.', 8),
('Servir chaud avec des pâtes ou du riz.', 8),
('Préparer les ingrédients : laver et essorer la laitue, faire des croûtons en coupant du pain en petits cubes et en les faisant dorer dans une poêle avec de l''huile d''olive et de l''ail, râper le parmesan.', 9),
('Préparer la sauce Caesar : mélanger 1 oeuf, 2 cuillères à soupe de jus de citron frais, 2 cuillères à soupe de vinaigre de vin blanc, 1 cuillère à soupe de moutarde de Dijon, 1 gousse d''ail hachée, 1/2 tasse d''huile d''olive, 1/2 tasse de parmesan râpé, sel et poivre.', 9),
('Assembler la salade : mélanger la salade avec la sauce Caesar, ajouter les croûtons croustillants et le parmesan râpé, et servir immédiatement.', 9),
('Préchauffer le four à 150°C.', 10),
('Faire bouillir 500 ml de crème liquide avec une gousse de vanille fendue en deux.', 10),
('Dans un bol, fouetter 4 jaunes d''oeufs avec 75 g de sucre jusqu''à ce que le mélange blanchisse.', 10),
('Incorporer le mélange de crème chaude aux jaunes d''oeufs tout en remuant constamment.', 10),
('Verser la préparation dans des ramequins allant au four et les disposer dans un plat allant au four.', 10),
('Ajouter de l''eau chaude dans le plat pour atteindre la moitié de la hauteur des ramequins.', 10),
('Cuire au four pendant environ 30 à 35 minutes, ou jusqu''à ce que les crèmes soient prises.', 10),
('Retirer les ramequins du plat et laisser refroidir à température ambiante pendant environ 30 minutes, puis placer au réfrigérateur pendant au moins 2 heures ou toute la nuit.', 10),
('Juste avant de servir, saupoudrer une fine couche de sucre cristallisé sur le dessus de chaque crème et brûler à l''aide d''un chalumeau de cuisine ou sous le gril du four jusqu''à ce que le sucre soit caramélisé et doré.', 10);

COMMIT;
